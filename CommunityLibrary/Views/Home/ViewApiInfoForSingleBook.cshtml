@model BookInfo

@{
    string imgSrc = null;
    if (Model.covers is not null)
    {
        int coverId = Model.covers.Where(x => x > 0).First();
        imgSrc = $"http://covers.openlibrary.org/b/id/{coverId}.jpg";
    }
    int allSubject = 0;
    if (Model.subjects is not null)
    {
        allSubject = Model.subjects.Length;
    }


}
<div class="top">
    @{ int max = 0;}

    @if (Model.covers is not null)
    {


        @foreach (var item in Model.covers)
        {
            if (item > 0)
            {
                string coverIds = $"http://covers.openlibrary.org/b/id/{item}.jpg";
                <img src="@coverIds" alt="Alternate Text" width="100" />
                max++;

            }
            if (max >= 10)
            {
                break;
            }
        }
    }
   
</div>


<h2 class="text">@Model.title</h2>
<div class="container">
    @if (imgSrc == null)
    {
        <img class="sideBySide" width="500" src="https://via.placeholder.com/500x750?text=No+Cover+Found" alt="No book cover image available for @Model.title">
    }
    else
    {
    <img src="@imgSrc" alt="Alternate Text" class="sideBySide" width="500" />
    }
    <div class="text sideBySide">


        <h4>Description</h4>
        <p>@Model.description</p>
        <div class="Authors">
            <h4>Author(s):</h4>
            @if (Model.authors is not null)
            {


                @foreach (Author author in Model.authors)
                {<div class="center">
                        @{
                            if (author.photos is not null)
                            {
                                int authorImgId = author.photos.First();
                                string authorImageSrc = $"http://covers.openlibrary.org/a/id/{authorImgId}-M.jpg";
                                <img src="@authorImageSrc" alt="Alternate Text" width="100" />
                            }

                        }

                        <p>@author.name</p>
                    </div>
                }
            }
            else
            {
                <p>Unknown Author</p>
            }
        </div>
        <h6>Subject(s):</h6>
        <p>
            @{
                int biterator = 0;
            }
            @if (Model.subjects is not null)
            {

            
            @foreach (string subject in Model.subjects)
            {
                @subject
                if (++biterator != allSubject && allSubject != 0)
                {
                    @:,
                }
            }
            }
        </p>
        <h6>Published:</h6>
        <p>@Model.created.value.ToShortDateString()</p>

        <a asp-action="AddBookToLibrary" asp-controller="Home" asp-route-bookId="@Model.key">
            <button>
                Add Book To My Library
            </button>
        </a>
        <p style="color:red">@TempData["ReviewBookError"]</p>
        <a asp-action="ReviewBook" asp-controller="Home" asp-route-bookId="@Model.key">
            <button>
                Add a Book Review
            </button>
        </a>

    </div>
</div>

<style>

    .text {
        background-color: rgba(255, 255, 255,.8);
        padding: 25px;
        border-radius: 25px;
    }

    .container {
        display: flex;
    }

    .sideBySide {
        flex: 1;
        border-radius: 25px;
    }

        .sideBySide:first-child {
            margin-right: 20px;
        }

    a {
        justify-content: center;
    }

    button {
        margin: 10px;
        padding: 10px 20px;
        border-radius: 5px;
        border: none;
        background-color: whitesmoke;
        color: black;
    }

    .Authors {
        display: flex;
    }

    .center {
        flex: 1;
        align-content: center;
        justify-content: center;
    }

    .top {
        flex: 1;
        align-content: center;
        justify-content: center;
        width: 100%;
    }

    button:hover {
        color: rgb(109,178,164);
        background-color: rgba(242,107,58, .2);
    }
</style>